<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Currency Converter</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <!-- Stylesheet-->

  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
      border: none;
      outline: none;
    }

    body {
      background-color: #9873fe;
    }

    .wrapper {
      width: 90%;
      max-width: 25em;
      background-color: #ffffff;
      position: absolute;
      transform: translate(-50%, -50%);
      left: 50%;
      top: 50%;
      padding: 2em;
      border-radius: 0.8em;
    }

    .app-details {
      display: flex;
      align-items: center;
      flex-direction: column;
    }

    .app-icon {
      width: 9.37em;
    }

    .app-title {
      font-size: 1.6em;
      text-transform: uppercase;
      margin-bottom: 1em;
    }

    label {
      display: block;
      font-weight: 600;
    }

    input#amount {
      font-weight: 400;
      font-size: 1.2em;
      display: block;
      width: 100%;
      border-bottom: 2px solid #02002c;
      color: #7a789d;
      margin-bottom: 2em;
      padding: 0.5em;
    }

    input#amount:focus {
      color: #9873fe;
      border-color: #9873fe;
    }

    .dropdowns {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1em;
    }

    select {
      width: 100%;
      padding: 0.6em;
      font-size: 1em;
      border-radius: 0.2em;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("arrow-down.svg");
      background-repeat: no-repeat;
      background-position: right 15px top 50%, center;
      background-size: 20px 20px;
      background-color: #9873fe;
      color: #ffffff;
    }

    select option {
      background-color: #ffffff;
      color: #02002c;
    }

    button {
      font-size: 1em;
      width: 100%;
      background-color: #9873fe;
      padding: 1em 0;
      margin-top: 2em;
      border-radius: 0.3em;
      color: #ffffff;
      font-weight: 600;
    }

    #result {
      font-size: 1.2em;
      text-align: center;
      margin-top: 1em;
      color: #02002c;
      background-color: #e5dbff;
      padding: 0.8em 0;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <div class="app-details">
      <img src="" class="app-icon" />
      <h1 class="app-title">Currency Converter</h1>
    </div>
    <label for="amount">Amount:</label>
    <input type="number" id="amount" value="100" />
    <div class="dropdowns">
      <select id="from-currency-select"></select>
      <select id="to-currency-select"></select>
    </div>
    <button id="convert-button">Convert</button>
    <p id="result"></p>
  </div>

  <!-- Scipt With Array Of Supported Country Codes -->
  <!-- Script with API Key -->
  <script src="./country-list.js"></script>

  <!-- SCRIPT -->
  <script>
    let api = `https://v6.exchangerate-api.com/v6/${country_list}/latest/USD`;
    const fromDropDown = document.getElementById("from-currency-select");
    const toDropDown = document.getElementById("to-currency-select");

    let currencies;

    //Create dropdown from the currencies array
    currencies.forEach((currency) => {
      const option = document.createElement("option");
      option.value = currency;
      option.text = currency;
      fromDropDown.add(option);
    });

    //Repeat same thing for the other dropdown
    currencies.forEach((currency) => {
      const option = document.createElement("option");
      option.value = currency;
      option.text = currency;
      toDropDown.add(option);
    });

    //Setting default values
    fromDropDown.value = "USD";
    toDropDown.value = "INR";

    let convertCurrency = () => {
      //Create References
      const amount = document.querySelector("#amount").value;
      const fromCurrency = fromDropDown.value;
      const toCurrency = toDropDown.value;

      //If amount input field is not empty
      if (amount.length != 0) {
        fetch(api)
          .then((resp) => resp.json())
          .then((data) => {
            let fromExchangeRate = data.conversion_rates[fromCurrency];
            let toExchangeRate = data.conversion_rates[toCurrency];
            const convertedAmount = (amount / fromExchangeRate) * toExchangeRate;
            result.innerHTML = `${amount} ${fromCurrency} = ${convertedAmount.toFixed(
              2
            )} ${toCurrency}`;
          });
      } else {
        alert("Please fill in the amount");
      }
    };

    document
      .querySelector("#convert-button")
      .addEventListener("click", convertCurrency);
    window.addEventListener("load", convertCurrency);
  </script>

</body>

</html>